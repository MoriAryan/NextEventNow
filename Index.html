<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BML5QKDYNY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
      
        gtag('config', 'G-BML5QKDYNY');
      </script>
      
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextEventNow - Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body.dark-mode {
    background: #162035;
    color: #e0e7ff;
}

body.dark-mode .event-card {
    background: #1e293b;
    /* border-left: 0; */
}

body.dark-mode .hero {
    background: linear-gradient(to bottom right, #000000, #000000);
}

body.dark-mode header {
    background: linear-gradient(to right, #0b1a33, #37398b);
}
body.dark-mode .next-event{
    background: linear-gradient(to right, #3b82f6, #6366f1);
}
body.dark-mode .search-event{
    background: linear-gradient(to right, #3b82f6, #6366f1);
}




        html { scroll-behavior: smooth; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #eef2f3, #f9f9f9);
            color: #1f2937;
            line-height: 1.6;
    transition: background-color 0.5s, color 0.5s;

        }
        header {
            background: linear-gradient(to right, #3b82f6, #6366f1);
            color: #fff;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        nav ul {
            list-style: none;
            margin-top: 10px;
        }
        nav ul li {
            display: inline-block;
            margin: 0 20px;
        }
        nav ul li a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        nav ul li a:hover {
            color: #ffcd38;
        }

        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 160px 20px 120px;
            text-align: center;
            background: linear-gradient(to bottom right, #4f46e5, #3b82f6);
            color: #fff;
            clip-path: ellipse(100% 85% at 50% 15%);
        }
        .hero h2 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .hero p {
            font-size: 1.3rem;
            max-width: 750px;
            margin-bottom: 30px;
            color: #e0e7ff;
        }
        .hero input {
            padding: 15px 20px;
            font-size: 1rem;
            border-radius: 50px;
            border: none;
            width: 90%;
            max-width: 600px;
            outline: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transition: box-shadow 0.3s ease;
        }
        .hero input:focus {
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
        }

        .next-event, #search-results-section {
            background: #fff;
            padding: 50px 30px;
            margin: 50px auto;
            border-radius: 20px;
            width: 90%;
            max-width: 1100px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .event-card {
            background: #fdfdfd;
            padding: 30px;
            margin: 20px auto;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
            text-align: left;
            border-left: 6px solid #3b82f6;
        }
        .event-card.live { border-color: #22c55e; }
        .event-card.upcoming { border-color: #facc15; }
        .event-card.completed { border-color: #ef4444; }
        .event-card:hover { transform: translateY(-6px); }
        .event-card h3 { color: #1d4ed8; margin-bottom: 12px; font-size: 1.4rem; }
        .highlight { background-color: #fff176; padding: 0 4px; border-radius: 3px; }
        .countdown { font-weight: 600; color: #dc2626; margin-top: 12px; font-size: 1rem; }
        .status-label {
            font-size: 0.9rem;
            padding: 5px 12px;
            border-radius: 20px;
            color: #fff;
            display: inline-block;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .status-live { background-color: #22c55e; }
        .status-upcoming { background-color: #facc15; color: #000; }
        .status-completed { background-color: #ef4444; }

        .contact-simple {
            background-color: #1e293b;
            color: white;
            padding: 80px 20px;
            text-align: center;
        }
        .contact-info {
            background: #0f172a;
            padding: 40px;
            border-radius: 15px;
            max-width: 600px;
            margin: auto;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
        }
        .contact-info h2 {
            font-size: 32px;
            margin-bottom: 25px;
            color: #fff;
        }
        .contact-info p {
            font-size: 16px;
            margin-bottom: 12px;
        }
        .contact-info a {
            color: #60a5fa;
            text-decoration: none;
        }
        .contact-info a:hover {
            text-decoration: underline;
        }
        
        
    </style>
</head>

<body>
    
    <header>
        
        
        
        <h1>NextEventNow</h1>
        <nav>
            <ul>
                <li><a href="Index.html">Home</a></li>
                <li><a href="Cards.html">Events</a></li>
                <li><a href="Categories.html">Categories</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
        <span class="dark-toggle" onclick="toggleTheme()" style="position: absolute; top: 25px; right: 30px; font-size: 24px; cursor: pointer;">🌙</span>
    </header>

    <section class="hero">
        <h2>Never Miss an Event Again – Stay Updated with NextEventNow!</h2>
        <p>NextEventNow is your one-stop platform to stay updated with all upcoming college events. Never miss out on
            important workshops, hackathons, and meetups again.</p>
        <input type="text" id="search-input" placeholder="Search events by name...">
    </section>

    <section id="search-results-section" class="search-event" style="display:none; animation: fadeIn 0.5s ease;">
        <h2>Search Results</h2>
        <div id="search-results"></div>
    </section>

    <section class="next-event" id="next-event">
        <h2>Next Upcoming Event(s)</h2>
        <div id="event-container"></div>
    </section>

    <section class="contact-simple" id="contact" style="text-align:center; padding:40px 20px;">
        <div class="contact-info" style="max-width:600px; margin:auto;">
            <h2>Contact Us</h2>
            <!-- <p><strong>Name:</strong> Mori Aryan</p> -->
            <p><strong>Email:</strong> <a href="mailto:nexteventnowbyaryan@gmail.com">nexteventnowbyaryan@gmail.com</a></p>
        </div>
    </section>

    <script>
        function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    const icon = document.querySelector('.dark-toggle');
    icon.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
}


        function getEventStatus(start, end) {
            const now = new Date();
            const startTime = new Date(start);
            const endTime = new Date(end);
            if (now >= startTime && now <= endTime) return "live";
            if (now < startTime) return "upcoming";
            return "completed";
        }

        function highlightMatch(name, term) {
            const regex = new RegExp(`\\b(${term})`, 'i');
            return name.replace(regex, '<span class="highlight">$1</span>');
        }

        async function fetchAndDisplayNextEvent(searchTerm = "") {
            const response = await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQz3J3EFI3-Iug1xQbPG4FnqjpIpEuGP59G1jV49WwjM6m3fAb1OokdLCaKybP93ulJI1-5YAX7oOAi/pub?gid=1367055444&single=true&output=csv");
            const data = await response.text();
            const rows = data.trim().split('\n').slice(1);
            const events = rows.map(row => {
                const [name, start, end, venue] = row.split(',');
                return { name, start, end, venue };
            });

            const now = new Date().getTime();
            const upcomingEvents = events.filter(event => new Date(event.start).getTime() > now);
            upcomingEvents.sort((a, b) => new Date(a.start) - new Date(b.start));

            const container = document.getElementById("event-container");
            container.innerHTML = "";

            if (upcomingEvents.length > 0) {
                const earliestTime = new Date(upcomingEvents[0].start).getTime();
                const nextEvents = upcomingEvents.filter(event => new Date(event.start).getTime() === earliestTime);

                nextEvents.forEach(event => {
                    const status = getEventStatus(event.start, event.end);
                    const card = document.createElement("div");
                    card.className = `event-card ${status}`;
                    card.innerHTML = `
                        <span class="status-label status-${status}">${status.toUpperCase()}</span>
                        <h3>📌 ${event.name}</h3>
                        <p>📅 ${new Date(event.start).toLocaleString()}</p>
                        <p>📍 ${event.venue}</p>
                        <p class="countdown" data-time="${event.start}"></p>
                    `;
                    container.appendChild(card);
                });
            }
        }

        function updateCountdown() {
            document.querySelectorAll(".countdown").forEach(timer => {
                const eventTime = new Date(timer.getAttribute("data-time")).getTime();
                const now = new Date().getTime();
                const timeDiff = eventTime - now;

                if (timeDiff < 0) {
                    timer.innerText = "🎉 Event has started!";
                } else {
                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                    timer.innerText = `⏳ ${days}d ${hours}h ${minutes}m ${seconds}s left`;
                }
            });
        }

        document.getElementById("search-input").addEventListener("input", async (e) => {
            const searchTerm = e.target.value.trim();
            const section = document.getElementById("search-results-section");

            if (!searchTerm) {
                section.style.display = "none";
                return;
            }

            const response = await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQz3J3EFI3-Iug1xQbPG4FnqjpIpEuGP59G1jV49WwjM6m3fAb1OokdLCaKybP93ulJI1-5YAX7oOAi/pub?gid=1367055444&single=true&output=csv");
            const data = await response.text();
            const rows = data.trim().split('\n').slice(1);
            const allEvents = rows.map(row => {
                const [name, start, end, venue] = row.split(',');
                return { name, start, end, venue };
            });

            const filtered = allEvents.filter(event =>
                event.name.toLowerCase().split(" ").some(word => word.startsWith(searchTerm.toLowerCase()))
            );

            const resultContainer = document.getElementById("search-results");
            resultContainer.innerHTML = "";

            if (filtered.length > 0) {
                filtered.forEach(event => {
                    const status = getEventStatus(event.start, event.end);
                    const card = document.createElement("div");
                    card.className = `event-card ${status} `;
                    card.innerHTML = `
                        <span class="status-label status-${status}">${status.toUpperCase()}</span>
                        <h3>📌 ${highlightMatch(event.name, searchTerm)}</h3>
                        <p>📅 ${new Date(event.start).toLocaleString()}</p>
                        <p>📍 ${event.venue}</p>
                    `;
                    resultContainer.appendChild(card);
                });
            } else {
                resultContainer.innerHTML = `<p>No events found matching your search.</p>`;
            }
            section.style.display = "block";
        });

        fetchAndDisplayNextEvent();
        setInterval(updateCountdown, 1000);
    

        
    </script>
</body>

</html>